package bot.generic_listeners;

import bot.util.Bot;
import net.dv8tion.jda.api.entities.Message;
import net.dv8tion.jda.api.entities.MessageEmbed;
import net.dv8tion.jda.api.entities.User;
import net.dv8tion.jda.api.events.message.MessageReceivedEvent;
import net.dv8tion.jda.api.hooks.ListenerAdapter;
import net.dv8tion.jda.api.hooks.SubscribeEvent;

import java.util.List;
import java.util.Locale;

public class BlockLorittaExploit extends ListenerAdapter {

    @SubscribeEvent
    public void onMessageReceived(MessageReceivedEvent event) {

        Message message = event.getMessage();
        User author = message.getAuthor();
        List<MessageEmbed> embeds = message.getEmbeds();

        if (embeds.isEmpty()) return;

        String title = embeds.get(0).getTitle();
        if (title == null) return;

        if (title.toLowerCase(Locale.ROOT).startsWith("que tal experimentar slash") && author.getIdLong() == 297153970613387264L)
            Bot.delete(message);
    }
}