package bot.listeners;

import bot.util.Bot;
import net.dv8tion.jda.api.entities.Message;
import net.dv8tion.jda.api.entities.MessageEmbed;
import net.dv8tion.jda.api.entities.User;
import net.dv8tion.jda.api.entities.channel.unions.MessageChannelUnion;
import net.dv8tion.jda.api.events.message.MessageReceivedEvent;
import net.dv8tion.jda.api.hooks.ListenerAdapter;
import net.dv8tion.jda.api.hooks.SubscribeEvent;

import java.util.List;
import java.util.Locale;

public class BlockLorittaExploit extends ListenerAdapter {

    @SubscribeEvent
    public void onMessageReceived(MessageReceivedEvent event) {

        Message message = event.getMessage();
        MessageChannelUnion channel = message.getChannel();
        User author = message.getAuthor();
        String content = message.getContentRaw();
        String[] args = content.split(" ");
        List<MessageEmbed> embeds = message.getEmbeds();
        List<String> commands = List.of(
                "+hug", "+abraco", "+abracar","+abraçar",
                "+kiss", "+beijo", "+beijar",
                "+slap", "+tapa", "+atacar", "+attack");

        if (commands.contains(args[0].toLowerCase(Locale.ROOT)))
            Bot.tempMessage(channel, "O comando `" + args[0] + "` está apenas disponível em Slash Command (`/`).", 15000);

        if (embeds.isEmpty()) return;

        String title = embeds.get(0).getTitle();
        if (title == null) return;

        if (title.toLowerCase(Locale.ROOT).startsWith("que tal experimentar slash") && author.getIdLong() == 297153970613387264L)
            Bot.delete(message);
    }
}